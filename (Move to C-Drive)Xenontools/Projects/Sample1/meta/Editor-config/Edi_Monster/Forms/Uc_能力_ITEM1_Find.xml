<?xml version="1.0" encoding="Shift_JIS" ?>
                                    <!-- ↓このバージョン番号の説明は
                                           Aa_Editor.xml参照 -->
<codefile-controls codefile-version="2.0">


    <!--
      このコントロールの紹介
    ┏━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┓
        ■
      ■■■ ドロップアイテム・ワン探すボタン
        ■
                                        [記号] Uc:能力_ITEM1_Find;
                                        [種類] ボタン（C:Btn;）
                                        [画面] メイン画面（Ufo:メイン;）
                                                    （Forms/Ufo_メイン.csv）

                モンスターのドロップアイテム１の、
                選択リストを出すボタンです。

    ├──────────────────────────────────┤
      【その他の機能】
                                [ボタン押下時]
                                    ・後で値を入れる先となる、数上下コント
                                      ロールの名前を一旦、記憶しておきます。
                                    ・「アイテム」ウィンドウを開きます。
                                    ・「アイテム」リストボックスで、
                                      現在選択されている項目が選ばれている
                                      状態にします。
    ┗━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━┛
    -->
    <control>
        
        
        <!--
          イベントの設定
        ┌──────────────────────────────────┐
            ■
          ■  ■ このボタンを押下した時（①）。
            ■
            
              （１）「Us:選択アイテムID欄;」変数（②）に、関連する数上下コント
                    ロールの名前「Uc:能力_ITEM1;」（③）を格納します。
              （２）「Ufo:アイテム;」ウィンドウ（④）を表示します。
                    ウィンドウオープン時に実行されるリフレッシャー
                    「Urfr:itemWindowOpened;」（⑤）を指定することもできます。
              （３）リストボックスの項目を自動選択します。
                    「Uc:アイ_recordsLst;」リストボックス・コントロール（⑥）
                    の「ID」（⑦）フィールドを検索し、⑧の値に一致する項目を選
                    択します。
                    ここで、⑧の値は別のテーブルから検索して見つけたものを持っ
                    てきます。
                    
                    ・⑧の値を選ぶ方法を指定します。
                    「Ut:敵;」テーブル（⑨）の「ITEM1」フィールド（⑩）から探
                    しだした値とします。
                    
                        ・レコードを選ぶ方法を指定します。（⑪）
                        「NO」フィールド（⑫）と、「Ui:選択モンスターRNo;」変
                        数（⑬）の内容が一致するレコードとします。
                    
                    該当するレコードがなかった場合、「2001」（⑭）を選びます。
                    空欄を指定した場合、「2001」（⑮）を選びます。
              （４）［トゥゲザーの設定］に名前が挙がっているコントロールを最新
                    の状態にし、このフォームの整合性を取ります。
        -->
        <event name="Se:ボタン押下時;"><!-- ① -->
            <fnc name="Sf:変数設定;">
                <arg name="Pm:name-var;"        value="Us:選択アイテムID欄;" /><!-- ② -->
                <arg name="Pm:value;"           value="Uc:能力_ITEM1;" /><!-- ③ -->
            </fnc>
            <fnc name="Sf:ウィンドウ表示;">
                <arg name="Pm:name-together;"  value="Urfr:itemWindowOpened;" /><!-- ⑤ -->
                <arg name="Pm:name-form;"     value="Ufo:アイテム;" /><!-- ④ -->
            </fnc>
            <fnc name="Sf:リスト項目選択;">
                <arg name="Pm:name-control;"    value="Uc:アイ_recordsLst;" /><!-- ⑥ -->
                <arg name="Pm:name-field-key;"  value="ID" /><!-- ⑦ -->
                <arg name="Pm:value-expected;">
                    <!-- ⑧ -->
                    <fnc name="Sf:Cell;">
                        <arg name="Pm:select;"  value="ITEM1" /><!-- ⑩ -->
                        <arg name="Pm:from;"    value="Ut:敵;" /><!-- ⑨ -->
                        <fnc name="Sf:Where;">
                            <!-- ⑪ -->
                            <fnc name="Sf:RecCond;">
                               <arg name="Pm:field;" value="NO" /><!-- ⑫ -->
                               <f-var value="Ui:選択モンスターRNo;" /><!-- ⑬ -->
                            </fnc>
                        </fnc>
                    </fnc>
                </arg>
                <arg name="Pm:value-expected2;" description="非該当時のデフォルト値">
                    <f-str value="2001" /><!-- ⑭ -->
                </arg>
                <arg name="Pm:value-empty;" description="空欄時のデフォルト値">
                    <f-str value="2001" /><!-- ⑮ -->
                </arg>
            </fnc>
            <fnc name="Sf:整合性を取る;" />
        </event>
        <!--
        └──────────────────────────────────┘
        -->


        <!--
          トゥゲザーの設定
        ┌──────────────────────────────────┐
              ■
          ■■■  このボタンを押下した時。
          ■

        -->
                        <!-- ① -->
        <together on="Se:ボタン押下時;" description="名前末尾の「*」はDirtyフラグ。" target="
            Uc:アイ_recordsLst;*
        "/> <!-- ② -->
        <!--
        ├──────────────────────────────────┤
          ※説明
              ・［イベントの設定］の「Se:ボタン押下時;」（①）の中に書かれてある
                「Sf:整合性を取る;」のタイミングで、名前が挙がっているコントロ
                ール（②）を最新の状態にし、このフォームの整合性を取ります。
          ※説明
              ・リストボックスの場合は、名前の後ろに「*」更新記号を付けること。
                リストボックスは、「更新」をしないと、表示が最新にならない。処
                理の重い再読み込みを行う。
        └──────────────────────────────────┘
        -->


    </control>


</codefile-controls>
